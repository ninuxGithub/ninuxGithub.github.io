---
title: 乐观锁vs悲观锁
author: ninuxGithub
layout: post
date: 2018-10-17 14:36:32
description: "乐观锁vs悲观锁"
tag: java
---
    <h2>乐观锁vs悲观锁</h2>

### 悲观锁（pessimistic lock）
    每次获取数据的时候，都会担心数据被修改，所以每次获取数据的时候都会进行加锁，
    确保在自己使用的过程中数据不会被别人修改，使用完成后进行数据解锁。由于数据进行加锁，
    期间对该数据进行读写的其他线程都会进行等待。



### 乐观锁（optismistic lock）
    每次获取数据的时候，都不会担心数据被修改，所以每次获取数据的时候都不会进行加锁，
    但是在更新数据的时候需要判断该数据是否被别人修改过。如果数据被其他线程修改，
    则不进行数据更新，如果数据没有被其他线程修改，则进行数据更新。由于数据没有进行加锁，
    期间该数据可以被其他线程进行读写操作。

### 使用场景
    悲观锁：比较适合写入操作比较频繁的场景，如果出现大量的读取操作，每次读取的时候都会进行加锁，这样会增加大量的锁的开销，降低了系统的吞吐量。
    
    乐观锁：比较适合读取操作比较频繁的场景，如果出现大量的写入操作，数据发生冲突的可能性就会增大，为了保证数据的一致性，
    应用层需要不断的重新获取数据，这样会增加大量的查询操作，降低了系统的吞吐量。
    
    总结：两种所各有优缺点，读取频繁使用乐观锁，写入频繁使用悲观锁。
